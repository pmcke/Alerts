CREATE TABLE alert_state (
    station TEXT NOT NULL,
    scenario TEXT NOT NULL,
    first_sent_utc TEXT NOT NULL,
    last_sent_utc  TEXT NOT NULL,
    send_count INTEGER NOT NULL DEFAULT 0,
    PRIMARY KEY (station, scenario)
);

CREATE TABLE stations (
    station TEXT,
    email TEXT NOT NULL,
    unsubscribed INTEGER DEFAULT 0,
    reboot INTEGER DEFAULT 0,
    PRIMARY KEY (station)
);

CREATE UNIQUE INDEX idx_station_lower
ON stations(LOWER(station));

